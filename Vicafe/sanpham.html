<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản lý Sản phẩm</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <style>
        .active-link {
            background-color: #4A5568; /* Màu nền nổi bật cho liên kết đang hoạt động */
            font-weight: bold; /* Tăng độ dày font cho liên kết đang chọn */
        }
        .hover-link:hover {
            background-color: #2d3748; /* Màu nền khi hover */
        }
        .modal {
            display: none; /* Ẩn modal ban đầu */
            position: fixed;
            z-index: 10;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5); /* Màu nền mờ cho modal */
        }
        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }
    </style>
</head>
<body class="bg-gray-100 font-sans">
    <div class="flex">
        <!-- Sidebar -->
        <div class="w-64 bg-gray-800 text-white h-screen">
            <div class="p-4">
                <h1 class="text-2xl font-bold">Sapo</h1>
            </div>
            <nav class="mt-10">
                <a href="tongquan.html" class="block py-2.5 px-4 rounded transition duration-200 hover-link">Tổng quan</a>
                <a href="donhang.html" class="block py-2.5 px-4 rounded transition duration-200 hover-link">Đơn hàng</a>
                <a href="sanpham.html" class="block py-2.5 px-4 rounded transition duration-200 hover-link active-link">Sản phẩm</a>
                <a href="khachhang.html" class="block py-2.5 px-4 rounded transition duration-200 hover-link">Khách hàng</a>
                <a href="baocao.html" class="block py-2.5 px-4 rounded transition duration-200 hover-link">Báo cáo</a>
                <a href="khuyenmai.html" class="block py-2.5 px-4 rounded transition duration-200 hover-link">Khuyến mãi</a>
                <a href="giaodien.html" class="block py-2.5 px-4 rounded transition duration-200 hover-link">Giao diện</a>
                <a href="thietlap.html" class="block py-2.5 px-4 rounded transition duration-200 hover-link">Thiết lập ứng dụng</a>
                <a href="dongbo.html" class="block py-2.5 px-4 rounded transition duration-200 hover-link">Đồng bộ</a>
                <a href="website.html" class="block py-2.5 px-4 rounded transition duration-200 hover-link">Website</a>
                <a href="blog.html" class="block py-2.5 px-4 rounded transition duration-200 hover-link">Blog</a>
            </nav>
        </div>
        <!-- Main Content -->
        <div class="flex-1 p-6">
            <div class="flex justify-between items-center mb-4">
                <div class="flex flex-col items-start">
                    <div class="flex items-center">
                        <img src="Images/mrthanh.png" alt="Logo" class="h-10 w-10 rounded-full mr-2">
                        <div>
                            <span class="text-lg font-bold">Mr. Thanh</span>
                            <div class="text-sm text-gray-500">Quản lý cấp cao</div> <!-- Thêm thông tin vị trí -->
                        </div>
                    </div>
                    <a href="adminlogin.html" class="text-red-500 hover:underline">Đăng xuất</a> <!-- Thêm liên kết đăng xuất -->
                </div>
                <input type="text" id="searchInput" placeholder="Tìm kiếm sản phẩm..." class="border rounded p-2 w-1/2">
                <button id="addProductBtn" class="bg-blue-500 text-white px-4 py-2 rounded ml-4">Thêm Sản phẩm</button>
            </div>
            <h2 class="text-2xl font-bold mb-4">Quản lý Sản phẩm</h2>
            <table class="min-w-full bg-white rounded shadow">
                <thead>
                    <tr class="bg-gray-200">
                        <th class="py-2 px-4 text-left">#</th>
                        <th class="py-2 px-4 text-left">Tên Sản phẩm</th>
                        <th class="py-2 px-4 text-left">Giá</th>
                        <th class="py-2 px-4 text-left">Số lượng</th>
                        <th class="py-2 px-4 text-left">Trạng thái</th>
                        <th class="py-2 px-4 text-left">Hành động</th>
                    </tr>
                </thead>
                <tbody id="productTableBody">
                    <!-- Dữ liệu sản phẩm sẽ được thêm vào đây -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Modal Thêm Sản phẩm -->
    <div id="addProductModal" class="modal">
        <div class="modal-content">
            <h2 class="text-2xl font-bold mb-4">Thêm Sản phẩm</h2>
            <label for="productName" class="block mb-2">Tên Sản phẩm:</label>
            <input type="text" id="productName" class="border rounded p-2 w-full mb-4" placeholder="Nhập tên sản phẩm...">
            <label for="productPrice" class="block mb-2">Giá:</label>
            <input type="text" id="productPrice" class="border rounded p-2 w-full mb-4" placeholder="Nhập giá sản phẩm...">
            <label for="productQuantity" class="block mb-2">Số lượng:</label>
            <input type="number" id="productQuantity" class="border rounded p-2 w-full mb-4" placeholder="Nhập số lượng sản phẩm...">
            <label for="productStatus" class="block mb-2">Trạng thái:</label>
            <select id="productStatus" class="border rounded p-2 w-full mb-4">
                <option value="Còn hàng">Còn hàng</option>
                <option value="Đã hết">Đã Hết</option>
                <option value="Đang nhập hàng">Đang Nhập Hàng</option>
            </select>
            <button id="saveProductBtn" class="bg-blue-500 text-white px-4 py-2 rounded">Lưu sản phẩm</button>
            <button id="closeModalBtn" class="bg-red-500 text-white px-4 py-2 rounded ml-2">Đóng</button>
        </div>
    </div>

    <script>
        // Lấy dữ liệu sản phẩm từ Local Storage
        const getProductsFromLocalStorage = () => {
            const products = localStorage.getItem('products');
            return products ? JSON.parse(products) : [];
        };

        // Lưu dữ liệu sản phẩm vào Local Storage
        const saveProductsToLocalStorage = (products) => {
            localStorage.setItem('products', JSON.stringify(products));
        };

        // Hiển thị sản phẩm trên bảng
        const renderProducts = () => {
            const products = getProductsFromLocalStorage();
            const productTableBody = document.getElementById('productTableBody');
            productTableBody.innerHTML = '';

            products.forEach((product, index) => {
                const row = productTableBody.insertRow();
                row.innerHTML = `
                    <td class="py-2 px-4">${index + 1}</td>
                    <td class="py-2 px-4">${product.name}</td>
                    <td class="py-2 px-4">${product.price}đ</td>
                    <td class="py-2 px-4">${product.quantity}</td>
                    <td class="py-2 px-4">${product.status}</td>
                    <td class="py-2 px-4">
                        <button class="text-blue-500 detail-btn">Xem chi tiết</button>
                        <button class="text-red-500 ml-2 delete-btn">Xóa</button>
                    </td>
                `;

                // Thêm chức năng xóa
                row.querySelector('.delete-btn').addEventListener('click', function() {
                    products.splice(index, 1); // Xóa sản phẩm khỏi mảng
                    saveProductsToLocalStorage(products); // Lưu lại
                    renderProducts(); // Cập nhật bảng
                });

                // Thêm chức năng xem chi tiết
                row.querySelector('.detail-btn').addEventListener('click', function() {
                    alert('Chi tiết sản phẩm:\nTên: ' + product.name + '\nGiá: ' + product.price + 'đ\nSố lượng: ' + product.quantity + '\nTrạng thái: ' + product.status);
                });
            });
        };

        document.addEventListener('DOMContentLoaded', () => {
            renderProducts(); // Hiển thị sản phẩm khi tải trang

            const addProductModal = document.getElementById('addProductModal');
            const addProductBtn = document.getElementById('addProductBtn');
            const closeModalBtn = document.getElementById('closeModalBtn');
            const saveProductBtn = document.getElementById('saveProductBtn');

            // Mở modal thêm sản phẩm
            addProductBtn.addEventListener('click', () => {
                addProductModal.style.display = 'block';
            });

            // Đóng modal
            closeModalBtn.addEventListener('click', () => {
                addProductModal.style.display = 'none';
            });

            // Lưu sản phẩm
            saveProductBtn.addEventListener('click', () => {
                const name = document.getElementById('productName').value;
                const price = document.getElementById('productPrice').value;
                const quantity = document.getElementById('productQuantity').value;
                const status = document.getElementById('productStatus').value;

                if (name && price && quantity) {
                    const products = getProductsFromLocalStorage();
                    products.push({ name, price, quantity, status });
                    saveProductsToLocalStorage(products);
                    renderProducts(); // Cập nhật bảng
                    addProductModal.style.display = 'none'; // Đóng modal
                    // Reset lại các trường input
                    document.getElementById('productName').value = '';
                    document.getElementById('productPrice').value = '';
                    document.getElementById('productQuantity').value = '';
                    document.getElementById('productStatus').value = 'Còn hàng';
                } else {
                    alert('Vui lòng nhập đầy đủ thông tin sản phẩm!');
                }
            });

            // Tìm kiếm sản phẩm
            document.getElementById('searchInput').addEventListener('input', function() {
                const searchText = this.value.toLowerCase();
                const rows = productTableBody.getElementsByTagName('tr');

                Array.from(rows).forEach(row => {
                    const productName = row.cells[1].textContent.toLowerCase();
                    row.style.display = productName.includes(searchText) ? '' : 'none';
                });
            });
        });
    </script>
</body>
</html>
