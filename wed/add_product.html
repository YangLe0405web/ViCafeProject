<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <title>Quản Lý Vị Cafe - Quản Lý Sản Phẩm</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
</head>

<body class="bg-gray-100 flex">
    <!-- Sidebar Menu -->
    <aside class="w-64 bg-gray-800 text-white h-screen">
        <div class="p-4 text-center">
            <h1 class="text-2xl font-bold">Quản Lý Vị Cafe</h1>
            <p>Admin: Mr. Thanh <span class="text-sm">(Quản lý cấp cao)</span></p>
        </div>
        <div class="p-4 text-center">
            <button onclick="window.location.href='adminlogin.html'" 
                    class="w-full py-2 px-4 bg-gray-700 text-gray-200 hover:bg-gray-600 hover:text-white font-semibold rounded-lg transition duration-200 ease-in-out transform focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-50">
                Đăng Xuất
            </button>
        </div>
        <nav class="mt-6 space-y-2">
            <a href="dashboard.html" class="block py-2 px-4 hover:bg-gray-700 rounded">Bảng Điều Khiển</a>
            <a href="user_management.html" class="block py-2 px-4 hover:bg-gray-700 rounded">Quản Lý Người Dùng</a>
            <a href="add_product.html" class="block py-2 px-4 bg-gray-700 rounded">Quản Lý Sản Phẩm</a>
            <a href="order_management.html" class="block py-2 px-4 hover:bg-gray-700 rounded">Quản Lý Đơn Hàng</a>
            <a href="statistics.html" class="block py-2 px-4 hover:bg-gray-700 rounded">Thống Kê Kinh Doanh</a>
        </nav>
    </aside>

    <!-- Main Content -->
    <div class="flex-1 p-8">
        <h2 class="text-3xl font-bold mb-6">Quản Lý Sản Phẩm</h2>
        <button onclick="toggleAddProduct()" class="bg-blue-500 text-white py-2 px-6 rounded hover:bg-blue-600 mb-4">Thêm Sản Phẩm</button>

        <!-- Search Product Input -->
        <div class="mb-4">
            <input 
                type="text" 
                id="searchInput" 
                placeholder="Tìm sản phẩm..." 
                class="w-full p-2 border rounded"
                onkeyup="searchProducts()"
            >
        </div>

        <!-- Filter by Category -->
        <div class="mb-4">
            <select id="categoryFilter" onchange="filterByCategory()" class="w-full p-2 border rounded">
                <option value="">Tất cả sản phẩm</option>
                <option value="Cà Phê">Cà Phê</option>
                <option value="Trà">Trà</option>
                <option value="Trà Sữa">Trà Sữa</option>
                <option value="Kem">Kem</option>
                <option value="Desert">Desert</option>
            </select>
        </div>

        <!-- Notification Message -->
        <div id="notification" class="hidden mb-4 p-4 bg-green-100 text-green-700 rounded border border-green-400"></div>

        <!-- Add/Edit Product Modal -->
        <div id="productModal" class="hidden fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center">
            <div class="bg-white p-8 rounded-lg w-1/3">
                <h2 id="modalTitle" class="text-2xl font-bold mb-4">Thêm Sản Phẩm</h2>
                <input type="hidden" id="productId">
                <div class="mb-4">
                    <label class="block text-gray-700">Tên Sản Phẩm</label>
                    <input type="text" id="productName" class="w-full p-2 border rounded">
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700">Giá Sản Phẩm</label>
                    <input type="number" id="productPrice" class="w-full p-2 border rounded">
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700">Danh Mục Sản Phẩm</label>
                    <select id="productCategory" class="w-full p-2 border rounded">
                        <option value="Cà Phê">Cà Phê</option>
                        <option value="Trà">Trà</option>
                        <option value="Trà Sữa">Trà Sữa</option>
                        <option value="Kem">Kem</option>
                        <option value="Desert">Desert</option>
                    </select>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700">Hình Ảnh Sản Phẩm</label>
                    <input type="file" id="productImage" class="mb-4" onchange="previewImage(event)">
                    <img id="imagePreview" class="hidden h-16 w-16 object-cover mb-4" />
                </div>
                <div class="flex justify-end space-x-2">
                    <button onclick="saveProduct()" class="bg-green-500 text-white py-2 px-4 rounded hover:bg-green-600">Lưu</button>
                    <button onclick="closeModal()" class="bg-red-500 text-white py-2 px-4 rounded hover:bg-red-600">Hủy</button>
                </div>
            </div>
        </div>

        <!-- Product Table -->
        <table class="min-w-full bg-white rounded-lg shadow-lg mt-4">
            <thead class="bg-gray-200">
                <tr>
                    <th class="py-3 px-6 text-left">Hình Ảnh</th>
                    <th class="py-3 px-6 text-left">Tên Sản Phẩm</th>
                    <th class="py-3 px-6 text-left">Giá</th>
                    <th class="py-3 px-6 text-left">Danh Mục</th>
                    <th class="py-3 px-6 text-left">Hành Động</th>
                </tr>
            </thead>
            <tbody id="productTable" class="divide-y divide-gray-200">
                <script>
                    // Sample product data
                    const products = [
                          { id: 1, name: 'Cà Phê Đen', price: 30000, image: 'Images/coffee đen.jpg', category: 'Cà Phê' },
                          { id: 2, name: 'Cà Phê Sữa', price: 22000, image: 'Images/coffee sữa.jpg', category: 'Cà Phê' },
                          { id: 3, name: 'Cà Phê Sữa Tươi', price: 25000, image: 'Images/cà phê sữa tươi.jpg', category: 'Cà Phê' },
                          { id: 4, name: 'Bạc Xỉu', price: 27000, image: 'Images/bạc xỉu.jpg', category: 'Cà Phê' },
                          { id: 5, name: 'Cà Phê Muối', price: 28000, image: 'Images/cà phê muối.jpg', category: 'Cà Phê' },
                              // Các sản phẩm hiện có trong mảng như Trà, Trà Sữa, Kem, Desert...
                          { id: 6, name: 'Trà Đào Cam Sả - Đá', price: 49000, image: 'Images/tradaocamsa.jpg', category: 'Trà' },
                          { id: 7, name: 'Trà Đào Cam Sả - Nóng', price: 59000, image: 'Images/tradaocamsa-nong.jpg', category: 'Trà' },
                          { id: 8, name: 'Oolong Tứ Qúy Sen (Nóng)', price: 59000, image: 'Images/oolongtuquysen(nong).jpg', category: 'Trà' },
                          { id: 9, name: 'Oolong Tứ Qúy Vải', price: 49000, image: 'Images/oolongtuquyvai.jpg', category: 'Trà' },
                          { id: 10, name: 'Oolong Tứ Qúy Kim Quất Trân Châu', price: 59000, image: 'Images/oolongtuquykimquattranchau.jpg', category: 'Trà' },
                          
                          { id: 11, name: 'Trà Sữa Truyền Thống', price: 25000, image: 'Images/trà sữa.jpg', category: 'Trà Sữa' },
                          { id: 12, name: 'Trà Sữa Dâu', price: 25000, image: 'Images/Trà sữa dâu.jpg', category: 'Trà Sữa' },
                          { id: 13, name: 'Trà Sữa Socola', price: 30000, image: 'Images/trà sữa socola.jpg', category: 'Trà Sữa' },
                          { id: 14, name: 'Trà Sữa Matcha Đậu Đỏ', price: 30000, image: 'Images/Trà sữa Matcha đậu đỏ.jpg', category: 'Trà Sữa' },
                          { id: 15, name: 'Sữa Tươi Trân Châu Đường Đen', price: 30000, image: 'Images/Sữa tươi trân châu đường đen.jpg', category: 'Trà Sữa' },

                          { id: 16, name: 'Cafe Kem Trân Châu Đường Đen', price: 25000, image: 'Images/cafekemtcdd.jpg', category: 'Kem' },
                          { id: 17, name: 'Kem Trân Châu Đường Đen', price: 25000, image: 'Images/kemtcdd.jpg', category: 'Kem' },
                          { id: 18, name: 'Kem Trà Sữa Trân Châu Đường Đen', price: 25000, image: 'Images/kemtstcdden.jpg', category: 'Kem' },
                          { id: 19, name: 'Kem Vani Trà Sữa Trân Châu Đường Đen', price: 25000, image: 'Images/kemVani_tstcdden.jpg', category: 'Kem' },
                          { id: 20, name: 'Kem Vani Dâu', price: 25000, image: 'Images/kemVanidau.jpg', category: 'Kem' },

                          { id: 20, name: 'Bánh Mì Que Pate', price: 15000, image: 'Images/bánh mì que pate.jpg', category: 'Desert' },
                          { id: 21, name: 'Bánh Mì Que Cay', price: 15000, image: 'Images/bánh mì que patecay.jpg', category: 'Desert' },
                          { id: 22, name: 'Croissant Trứng Muối', price: 39000, image: 'Images/croisaint trứng muối.jpg', category: 'Desert' },
                          { id: 23, name: 'Butter Croissant Sữa Đặc', price: 39000, image: 'Images/Butter Croissant Sữa Đặc.jpg', category: 'Desert' },
                          { id: 24, name: 'Chà Bông Phô Mai', price: 19000, image: 'Images/chà bông phô mai.jpg', category: 'Desert' },
                          { id: 25, name: 'Mousse Tiramisu', price: 35000, image: 'Images/mousse tiramisu.jpg', category: 'Desert' },
                          { id: 26, name: 'Mousse Gấu Chocolate', price: 39000, image: 'Images/mousse gấu.jpg', category: 'Desert' },
                          { id: 27, name: 'Mochi Phúc Bồn Tử', price: 19000, image: 'Images/mochi phúc bồn tử.jpg', category: 'Desert' },
                          { id: 29, name: 'Mochi Trà Xanh', price: 19000, image: 'Images/mochi matcha.jpg', category: 'Desert' },
                          { id: 30, name: 'Mochi Chocolate', price: 19000, image: 'Images/mochi chocolae.jpg', category: 'Desert' },

                      // Các sản phẩm khác tiếp tục ở đây...  
                    ];

                    // Render product table
                    function renderProductTable(filteredProducts = products) {
                        const productTable = document.getElementById('productTable');
                        productTable.innerHTML = ''; // Clear existing table rows

                        filteredProducts.forEach(product => {
                            productTable.innerHTML += `
                                <tr>
                                    <td class="py-4 px-6"><img src="${product.image}" class="h-16 w-16 object-cover" alt="${product.name}"></td>
                                    <td class="py-4 px-6">${product.name}</td>
                                    <td class="py-4 px-6">${product.price} VND</td>
                                    <td class="py-4 px-6">${product.category}</td>
                                    <td class="py-4 px-6">
                                        <button onclick="editProduct(${product.id})" class="bg-yellow-500 text-white py-1 px-2 rounded hover:bg-yellow-600">Sửa</button>
                                        <button onclick="deleteProduct(${product.id})" class="bg-red-500 text-white py-1 px-2 rounded hover:bg-red-600">Xóa</button>
                                    </td>
                                </tr>
                            `;
                        });
                    }

                    // Show notification
                    function showNotification(message) {
                        const notification = document.getElementById('notification');
                        notification.textContent = message;
                        notification.classList.remove('hidden');
                        setTimeout(() => {
                            notification.classList.add('hidden');
                        }, 3000);
                    }

                    // Open modal for adding product
                    function toggleAddProduct() {
                        document.getElementById('productModal').classList.remove('hidden');
                        document.getElementById('modalTitle').textContent = 'Thêm Sản Phẩm';
                        document.getElementById('productId').value = '';
                        document.getElementById('productName').value = '';
                        document.getElementById('productPrice').value = '';
                        document.getElementById('productCategory').value = 'Cà Phê';
                        document.getElementById('imagePreview').classList.add('hidden');
                    }

                    // Open modal for editing product
                    function editProduct(id) {
                        const product = products.find(p => p.id === id);
                        document.getElementById('productId').value = product.id;
                        document.getElementById('productName').value = product.name;
                        document.getElementById('productPrice').value = product.price;
                        document.getElementById('productCategory').value = product.category;
                        document.getElementById('imagePreview').src = product.image;
                        document.getElementById('imagePreview').classList.remove('hidden');
                        document.getElementById('modalTitle').textContent = 'Sửa Sản Phẩm';
                        document.getElementById('productModal').classList.remove('hidden');
                    }

                    // Save product (add/edit)
                    function saveProduct() {
                        const id = document.getElementById('productId').value;
                        const name = document.getElementById('productName').value;
                        const price = document.getElementById('productPrice').value;
                        const category = document.getElementById('productCategory').value;
                        
                        if (!name || !price || !category) {
                            alert("Vui lòng điền đầy đủ thông tin sản phẩm!");
                            return;
                        }

                        if (id) { // Edit product
                            showNotification(`Cập nhật sản phẩm "${name}" thành công.`);
                        } else { // Add new product
                            showNotification(`Thêm sản phẩm "${name}" thành công.`);
                        }
                        
                        closeModal();
                    }

                    // Delete product
                    function deleteProduct(id) {
                        const product = products.find(p => p.id === id);
                        const confirmDelete = confirm(`Bạn có chắc chắn muốn xóa sản phẩm "${product.name}" không?`);
                        if (confirmDelete) {
                            showNotification(`Xóa sản phẩm "${product.name}" thành công.`);
                        }
                    }

                    // Close modal
                    function closeModal() {
                        document.getElementById('productModal').classList.add('hidden');
                    }

                    // Filter products by category
                    function filterByCategory() {
                        const category = document.getElementById('categoryFilter').value;
                        const filteredProducts = category ? products.filter(p => p.category === category) : products;
                        renderProductTable(filteredProducts);
                    }

                    // Search products
                    function searchProducts() {
                        const query = document.getElementById('searchInput').value.toLowerCase();
                        const filteredProducts = products.filter(p => p.name.toLowerCase().includes(query));
                        renderProductTable(filteredProducts);
                    }

                    // Initial render
                    renderProductTable();
                </script>
            </tbody>
        </table>
    </div>
</body>

</html>
